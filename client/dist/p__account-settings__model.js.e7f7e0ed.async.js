(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{LStR:function(e,a,t){"use strict";var r=t("g09b");Object.defineProperty(a,"__esModule",{value:!0}),a.updateMemberCard=d,a.updateMbsInfo=p,a.cardResetPwd=m;var n=r(t("d6i3")),s=r(t("1l/V")),u=r(t("t3Un")),l=t("NoBN"),c=window.config;function d(e){return o.apply(this,arguments)}function o(){return o=(0,s.default)(n.default.mark(function e(a){var t,r;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={ElementType:"MbsCardUpdate",XmlDatas:[]},Object.keys(a).filter(function(e){switch(e){case"CARDNO":t.XmlDatas.push({DataName:"CARDNO",DataValue:a.CARDNO||""});break;case"CARD_DOB":t.XmlDatas.push({DataName:"CARD_DOB",DataValue:a.CARD_DOB||""});break;case"CARD_EMAIL":t.XmlDatas.push({DataName:"CARD_EMAIL",DataValue:a.CARD_EMAIL||""});break;case"CARD_SEX":t.XmlDatas.push({DataName:"CARD_SEX",DataValue:a.CARD_SEX||""});break;case"CARD_SUR":t.XmlDatas.push({DataName:"CARD_SUR",DataValue:a.CARD_SUR||""});break;case"CARD_GIV":t.XmlDatas.push({DataName:"CARD_GIV",DataValue:a.CARD_GIV||""});break;case"CARD_MOBIL":t.XmlDatas.push({DataName:"CARD_MOBIL",DataValue:a.CARD_MOBIL||""});break}}),r=(0,l.PrepareXML)(t),e.abrupt("return",(0,u.default)(c.serverUrl,{method:"POST",data:r,headers:{"Content-Type":"text/xml"}}));case 4:case"end":return e.stop()}},e)})),o.apply(this,arguments)}function p(e){return D.apply(this,arguments)}function D(){return D=(0,s.default)(n.default.mark(function e(a){var t,r;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={ElementType:"MbsUpdate",XmlDatas:[]},Object.keys(a).filter(function(e){switch(e){case"MBNUM":t.XmlDatas.push({DataName:"MBNUM",DataValue:a.MBNUM||""});break;case"MEMB_BADD1":t.XmlDatas.push({DataName:"MEMB_BADD1",DataValue:a.MEMB_BADD1||""});break;case"MEMB_BPOST":t.XmlDatas.push({DataName:"MEMB_BPOST",DataValue:a.MEMB_BPOST||""});break;case"MEMB_RADD1":t.XmlDatas.push({DataName:"MEMB_RADD1",DataValue:a.MEMB_RADD1||""});break;case"MEMB_RPOST":t.XmlDatas.push({DataName:"MEMB_RPOST",DataValue:a.MEMB_RPOST||""});break;case"MEMB_CONM":t.XmlDatas.push({DataName:"MEMB_CONM",DataValue:a.MEMB_CONM||""});break}}),r=(0,l.PrepareXML)(t),e.abrupt("return",(0,u.default)(c.serverUrl,{method:"POST",data:r,headers:{"Content-Type":"text/xml"}}));case 4:case"end":return e.stop()}},e)})),D.apply(this,arguments)}function m(e){return i.apply(this,arguments)}function i(){return i=(0,s.default)(n.default.mark(function e(a){var t,r;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={ElementType:"CardResetPwd",XmlDatas:[{DataName:"cardno",DataValue:a.username},{DataName:"OldPassword",DataValue:a.OldPassword},{DataName:"NewPassword",DataValue:a.NewPassword}]},r=(0,l.PrepareXML)(t),e.abrupt("return",(0,u.default)(c.serverUrl,{method:"POST",data:r,headers:{"Content-Type":"text/xml"}}));case 3:case"end":return e.stop()}},e)})),i.apply(this,arguments)}},wwoC:function(e,a,t){"use strict";var r=t("g09b");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=r(t("p0pE")),s=r(t("gWZ8")),u=r(t("eHn4")),l=r(t("d6i3"));t("miYZ");var c=r(t("tsqr")),d=t("LStR"),o=t("k9Yu"),p=t("NoBN"),D={namespace:"accountSettings",state:{isLoading:!1},effects:{resetPassword:l.default.mark(function e(a,t){var r,n,s,u,o,D,m;return l.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,n=t.call,s=t.put,e.next=4,s({type:"changeLoading",payload:!0});case 4:return e.next=6,n(d.cardResetPwd,r);case 6:return u=e.sent,o=(new DOMParser).parseFromString(u,"text/xml"),D=(0,p.xml2json)(o.documentElement,"  "),m=(0,p.responseXml)(D),"OK"===m.AnswerStatus?c.default.success("Success"):c.default.error(m.Message),e.next=13,s({type:"changeLoading",payload:!1});case 13:case"end":return e.stop()}},e)}),updateInfo:l.default.mark(function e(a,t){var r,D,m,i,M,f,w,O,b,h,N,R,x,C,A,_,B,y,E,g,S,k,P;return l.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,D=t.call,m=t.put,e.next=4,m({type:"changeLoading",payload:!0});case 4:return i=Object.keys(r).filter(function(e){return e.includes("CARD")}).reduce(function(e,a){return Object.assign(e,{CARDNO:r.CARDNO},(0,u.default)({},a,r[a]))},{}),M=Object.keys(r).filter(function(e){return e.includes("MEMB")}).reduce(function(e,a){return Object.assign(e,{MBNUM:r.MBNUM},(0,u.default)({},a,r[a]))},{}),e.next=8,D(d.updateMemberCard,i);case 8:return f=e.sent,w=(new DOMParser).parseFromString(f,"text/xml"),O=(0,p.xml2json)(w.documentElement,"  "),b=(0,p.responseXml)(O),e.next=14,D(d.updateMbsInfo,M);case 14:if(h=e.sent,N=(new DOMParser).parseFromString(h,"text/xml"),R=(0,p.xml2json)(N.documentElement,"  "),x=(0,p.responseXml)(R),!b.AnswerStatus||"OK"!==x.AnswerStatus){e.next=38;break}return e.next=21,D(o.queryMemberCard,{username:r.CARDNO});case 21:return C=e.sent,A=(new DOMParser).parseFromString(C,"text/xml"),_=(0,p.xml2json)(A.documentElement,"  "),B=(0,p.responseXml)(_),y=Object.assign.apply(Object,(0,s.default)(B.map(function(e){return(0,u.default)({},e["Name"],e["Value"])}))),e.next=28,D(o.queryMemberInfo,y.MBNUM);case 28:return E=e.sent,g=(new DOMParser).parseFromString(E,"text/xml"),S=(0,p.xml2json)(g.documentElement,"  "),k=(0,p.responseXml)(S),P=Object.assign.apply(Object,(0,s.default)(k.map(function(e){return(0,u.default)({},e["Name"],e["Value"])}))),e.next=35,m({type:"user/saveCurrentMember",payload:(0,n.default)({},y,P)});case 35:c.default.success("Success"),e.next=39;break;case 38:c.default.error(b.Message);case 39:return e.next=41,m({type:"changeLoading",payload:!1});case 41:case"end":return e.stop()}},e)})},reducers:{changeLoading:function(e,a){return(0,n.default)({},e,{isLoading:a.payload})}}};a.default=D}}]);